import{inject,onUnmounted,onDeactivated,onActivated,computed,unref,defineComponent,reactive,h,provide,ref,watch,shallowRef,shallowReactive,nextTick}from"vue";const isBrowser="undefined"!=typeof document;function isRouteComponent(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function isESModule(e){return e.__esModule||"Module"===e[Symbol.toStringTag]||e.default&&isRouteComponent(e.default)}const assign=Object.assign;function applyToParams(e,t){const r={};for(const n in t){const o=t[n];r[n]=isArray(o)?o.map(e):e(o)}return r}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return null==e?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch(e){}return""+e}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,r="/"){let n,o={},a="",i="";var s=t.indexOf("#");let c=t.indexOf("?");return-1<(c=s<c&&0<=s?-1:c)&&(n=t.slice(0,c),a=t.slice(c+1,-1<s?s:t.length),o=e(a)),-1<s&&(n=n||t.slice(0,s),i=t.slice(s,t.length)),{fullPath:(n=resolveRelativePath(null!=n?n:t,r))+(a&&"?")+a+i,path:n,query:o,hash:decode(i)}}function stringifyURL(e,t){e=t.query?e(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function stripBase(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function isSameRouteLocation(e,t,r){var n=t.matched.length-1,o=r.matched.length-1;return-1<n&&n==o&&isSameRouteRecord(t.matched[n],r.matched[o])&&isSameRouteLocationParams(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],t[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,r){return isArray(r)?e.length===r.length&&e.every((e,t)=>e===r[t]):1===e.length&&e[0]===r}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),o=n[n.length-1];".."!==o&&"."!==o||n.push("");let a,i,s=r.length-1;for(a=0;a<n.length;a++)if("."!==(i=n[a])){if(".."!==i)break;1<s&&s--}return r.slice(0,s).join("/")+"/"+n.slice(a).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType,NavigationDirection,NavigationFailureType;!function(e){e.pop="pop",e.push="push"}(NavigationType=NavigationType||{}),function(e){e.back="back",e.forward="forward",e.unknown=""}(NavigationDirection=NavigationDirection||{});const START="";function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){var r=document.documentElement.getBoundingClientRect(),e=e.getBoundingClientRect();return{behavior:t.behavior,left:e.left-r.left-(t.left||0),top:e.top-r.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const r=e.el,n="string"==typeof r&&r.startsWith("#"),o="string"==typeof r?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;t=getElementPosition(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){var t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(r,e){const{pathname:t,search:n,hash:o}=e,a=r.indexOf("#");if(-1<a){let e=o.includes(r.slice(a))?r.slice(a).length:1,t=o.slice(e);return stripBase(t="/"!==t[0]?"/"+t:t,"")}return stripBase(t,r)+n+o}function useHistoryListeners(a,i,s,c){let u=[],r=[],l=null;const t=({state:e})=>{const t=createCurrentLocation(a,location),r=s.value,n=i.value;let o=0;if(e){if(s.value=t,i.value=e,l&&l===r)return void(l=null);o=n?e.position-n.position:0}else c(t);u.forEach(e=>{e(s.value,r,{delta:o,type:NavigationType.pop,direction:o?0<o?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function n(){const e=window["history"];e.state&&e.replaceState(assign({},e.state,{scroll:computeScrollPosition()}),"")}return window.addEventListener("popstate",t),window.addEventListener("beforeunload",n,{passive:!0}),{pauseListeners:function(){l=s.value},listen:function(t){u.push(t);var e=()=>{var e=u.indexOf(t);-1<e&&u.splice(e,1)};return r.push(e),e},destroy:function(){for(const e of r)e();r=[],window.removeEventListener("popstate",t),window.removeEventListener("beforeunload",n)}}}function buildState(e,t,r,n=!1,o=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(o){const{history:a,location:i}=window,n={value:createCurrentLocation(o,i)},s={value:a.state};function c(e,t,r){var n=o.indexOf("#"),n=-1<n?(i.host&&document.querySelector("base")?o:o.slice(n))+e:createBaseLocation()+o+e;try{a[r?"replaceState":"pushState"](t,"",n),s.value=t}catch(e){console.error(e),i[r?"replace":"assign"](n)}}return s.value||c(n.value,{back:null,current:n.value,forward:null,position:a.length-1,replaced:!0,scroll:null},!0),{location:n,state:s,push:function(e,t){var r=assign({},s.value,a.state,{forward:e,scroll:computeScrollPosition()});c(r.current,r,!0),c(e,assign({},buildState(n.value,e,null),{position:r.position+1},t),!1),n.value=e},replace:function(e,t){c(e,assign({},a.state,buildState(s.value.back,e,s.value.forward,!0),t,{position:s.value.position}),!0),n.value=e}}}function createWebHistory(e){const t=useHistoryStateNavigation(e=normalizeBase(e)),r=useHistoryListeners(e,t.state,t.location,t.replace);e=assign({location:"",base:e,go:function(e,t=!0){t||r.pauseListeners(),history.go(e)},createHref:createHref.bind(null,e)},t,r);return Object.defineProperty(e,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(e,"state",{enumerable:!0,get:()=>t.state.value}),e}function createMemoryHistory(e=""){let c=[],u=[""],l=0;function r(e){++l!==u.length&&u.splice(l),u.push(e)}e={location:"",state:{},base:e=normalizeBase(e),createHref:createHref.bind(null,e),replace(e){u.splice(l--,1),r(e)},push(e,t){r(e)},listen:t=>(c.push(t),()=>{var e=c.indexOf(t);-1<e&&c.splice(e,1)}),destroy(){c=[],u=[""],l=0},go(e,t=!0){var r=this.location,n=e<0?NavigationDirection.back:NavigationDirection.forward;if(l=Math.max(0,Math.min(l+e,u.length-1)),t){var[o,a,{direction:i,delta:t}]=[this.location,r,{direction:n,delta:e}],s={direction:i,delta:t,type:NavigationType.pop};for(const i of c)i(o,a,s)}}};return Object.defineProperty(e,"location",{enumerable:!0,get:()=>u[l]}),e}function createWebHashHistory(e){return(e=location.host?e||location.pathname+location.search:"").includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return"string"==typeof e||e&&"object"==typeof e}function isRouteName(e){return"string"==typeof e||"symbol"==typeof e}const NavigationFailureSymbol=Symbol("");function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(null==t||!!(e.type&t))}!function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"}(NavigationFailureType=NavigationFailureType||{});const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(u,n){const o=assign({},BASE_PATH_PARSER_OPTIONS,n),e=[];let a=o.start?"^":"";const i=[];for(const n of u){const u=n.length?[]:[90];o.strict&&!n.length&&(a+="/");for(let r=0;r<n.length;r++){const c=n[r];let t=40+(o.sensitive?.25:0);if(0===c.type)r||(a+="/"),a+=c.value.replace(REGEX_CHARS_RE,"\\$&"),t+=40;else if(1===c.type){const{value:u,repeatable:o,optional:l,regexp:f}=c;i.push({name:u,repeatable:o,optional:l});var s=f||BASE_PARAM_PATTERN;if(s!==BASE_PARAM_PATTERN){t+=10;try{new RegExp(`(${s})`)}catch(n){throw new Error(`Invalid custom RegExp for param "${u}" (${s}): `+n.message)}}let e=o?`((?:${s})(?:/(?:${s}))*)`:`(${s})`;r||(e=l&&n.length<2?`(?:/${e})`:"/"+e),l&&(e+="?"),a+=e,t+=20,l&&(t+=-8),o&&(t+=-20),".*"===s&&(t+=-50)}u.push(t)}e.push(u)}if(o.strict&&o.end){const u=e.length-1;e[u][e[u].length-1]+=.7000000000000001}o.strict||(a+="/?"),o.end?a+="$":o.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const c=new RegExp(a,o.sensitive?"":"i");return{re:c,score:e,keys:i,parse:function(e){const t=e.match(c),r={};if(!t)return null;for(let e=1;e<t.length;e++){const n=t[e]||"",o=i[e-1];r[o.name]=n&&o.repeatable?n.split("/"):n}return r},stringify:function(e){let t="",r=!1;for(const o of u){r&&t.endsWith("/")||(t+="/"),r=!1;for(const u of o)if(0===u.type)t+=u.value;else if(1===u.type){const{value:a,repeatable:i,optional:s}=u,c=a in e?e[a]:"";if(isArray(c)&&!i)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);var n=isArray(c)?c.join("/"):c;if(!n){if(!s)throw new Error(`Missing required param "${a}"`);o.length<2&&(t.endsWith("/")?t=t.slice(0,-1):r=!0)}t+=n}}return t||"/"}}}function compareScoreArray(e,t){let r=0;for(;r<e.length&&r<t.length;){var n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function comparePathParserScore(e,t){let r=0;for(var n=e.score,o=t.score;r<n.length&&r<o.length;){const e=compareScoreArray(n[r],o[r]);if(e)return e;r++}if(1===Math.abs(o.length-n.length)){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(o))return-1}return o.length-n.length}function isLastScoreNegative(e){var t=e[e.length-1];return 0<e.length&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if("/"===e)return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${r})/"${u}": `+e)}let r=0,n=r;const o=[];let a;function i(){a&&o.push(a),a=[]}let s,c=0,u="",l="";function f(){u&&(0===r?a.push({type:0,value:u}):1===r||2===r||3===r?(1<a.length&&("*"===s||"+"===s)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),u="")}function p(){u+=s}for(;c<e.length;)if("\\"!==(s=e[c++])||2===r)switch(r){case 0:"/"===s?(u&&f(),i()):":"===s?(f(),r=1):p();break;case 4:p(),r=n;break;case 1:"("===s?r=2:VALID_PARAM_RE.test(s)?p():(f(),r=0,"*"!==s&&"?"!==s&&"+"!==s&&c--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:r=3:l+=s;break;case 3:f(),r=0,"*"!==s&&"?"!==s&&"+"!==s&&c--,l="";break;default:t("Unknown state")}else n=r,r=4;return 2===r&&t(`Unfinished custom RegExp for param "${u}"`),f(),i(),o}function createRouteRecordMatcher(e,t,r){r=tokensToParser(tokenizePath(e.path),r),r=assign(r,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function createRouterMatcher(e,f){const p=[],d=new Map;function h(t,e,r){const n=!r,o=normalizeRouteRecord(t),a=(o.aliasOf=r&&r.record,mergeOptions(f,t)),i=[o];if("alias"in t){const f="string"==typeof t.alias?[t.alias]:t.alias;for(const t of f)i.push(normalizeRouteRecord(assign({},o,{components:(r?r.record:o).components,path:t,aliasOf:r?r.record:o})))}let s,c;for(const f of i){const i=f["path"];if(e&&"/"!==i[0]){const t=e.record.path;f.path=e.record.path+(i&&("/"===t[t.length-1]?"":"/")+i)}if(s=createRouteRecordMatcher(f,e,a),r?r.alias.push(s):((c=c||s)!==s&&c.alias.push(s),n&&t.name&&!isAliasRecord(s)&&m(t.name)),isMatchable(s)&&(l=void 0,l=findInsertionIndex(u=s,p),p.splice(l,0,u),u.record.name&&!isAliasRecord(u)&&d.set(u.record.name,u)),o.children){const t=o.children;for(let e=0;e<t.length;e++)h(t[e],s,r&&r.children[e])}r=r||s}var u,l;return c?()=>{m(c)}:noop}function m(e){if(isRouteName(e)){const r=d.get(e);r&&(d.delete(e),p.splice(p.indexOf(r),1),r.children.forEach(m),r.alias.forEach(m))}else{var t=p.indexOf(e);-1<t&&(p.splice(t,1),e.record.name&&d.delete(e.record.name),e.children.forEach(m),e.alias.forEach(m))}}return f=mergeOptions({strict:!1,end:!0,sensitive:!1},f),e.forEach(e=>h(e)),{addRoute:h,resolve:function(e,t){let r,n,o,a={};if("name"in e&&e.name){if(!(r=d.get(e.name)))throw createRouterError(1,{location:e});o=r.record.name,a=assign(paramsFromLocation(t.params,r.keys.filter(e=>!e.optional).concat(r.parent?r.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&paramsFromLocation(e.params,r.keys.map(e=>e.name))),n=r.stringify(a)}else if(null!=e.path)n=e.path,(r=p.find(e=>e.re.test(n)))&&(a=r.parse(n),o=r.record.name);else{if(!(r=t.name?d.get(t.name):p.find(e=>e.re.test(t.path))))throw createRouterError(1,{location:e,currentLocation:t});o=r.record.name,a=assign({},t.params,e.params),n=r.stringify(a)}const i=[];let s=r;for(;s;)i.unshift(s.record),s=s.parent;return{name:o,path:n,params:a,matched:i,meta:mergeMetaFields(i)}},removeRoute:m,clearRoutes:function(){p.length=0,d.clear()},getRoutes:function(){return p},getRecordMatcher:function(e){return d.get(e)}}}function paramsFromLocation(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function normalizeRouteRecord(e){e={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]="object"==typeof r?r[n]:r;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(e,t){const r={};for(const n in e)r[n]=(n in t?t:e)[n];return r}function findInsertionIndex(e,t){let r=0,n=t.length;for(;r!==n;){const o=r+n>>1;comparePathParserScore(e,t[o])<0?n=o:r=1+o}const o=getInsertionAncestor(e);return n=o?t.lastIndexOf(o,n-1):n}function getInsertionAncestor(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&0===comparePathParserScore(e,t))return t}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function parseQuery(e){const t={};if(""===e||"?"===e)return t;const r=("?"===e[0]?e.slice(1):e).split("&");for(let e=0;e<r.length;++e){const n=r[e].replace(PLUS_RE," "),o=n.indexOf("="),a=decode(o<0?n:n.slice(0,o)),i=o<0?null:decode(n.slice(o+1));if(a in t){let e=t[a];(e=isArray(e)?e:t[a]=[e]).push(i)}else t[a]=i}return t}function stringifyQuery(e){let r="";for(let t in e){const n=e[t];(t=encodeQueryKey(t),null==n)?void 0!==n&&(r+=(r.length?"&":"")+t):(isArray(n)?n.map(e=>e&&encodeQueryValue(e)):[n&&encodeQueryValue(n)]).forEach(e=>{void 0!==e&&(r+=(r.length?"&":"")+t,null!=e&&(r+="="+e))})}return r}function normalizeQuery(e){const t={};for(const r in e){const n=e[r];void 0!==n&&(t[r]=isArray(n)?n.map(e=>null==e?null:""+e):null==n?n:""+n)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let r=[];return{add:function(t){return r.push(t),()=>{var e=r.indexOf(t);-1<e&&r.splice(e,1)}},list:()=>r.slice(),reset:function(){r=[]}}}function registerGuard(e,t,r){var n=()=>{e[t].delete(r)};onUnmounted(n),onDeactivated(n),onActivated(()=>{e[t].add(r)}),e[t].add(r)}function onBeforeRouteLeave(e){var t=inject(matchedRouteKey,{}).value;t&&registerGuard(t,"leaveGuards",e)}function onBeforeRouteUpdate(e){var t=inject(matchedRouteKey,{}).value;t&&registerGuard(t,"updateGuards",e)}function guardToPromiseFn(a,i,s,c,u,l=e=>e()){const f=c&&(c.enterCallbacks[u]=c.enterCallbacks[u]||[]);return()=>new Promise((t,r)=>{const e=e=>{!1===e?r(createRouterError(4,{from:s,to:i})):e instanceof Error?r(e):isRouteLocation(e)?r(createRouterError(2,{from:i,to:e})):(f&&c.enterCallbacks[u]===f&&"function"==typeof e&&f.push(e),t())},n=l(()=>a.call(c&&c.instances[u],i,s,e));let o=Promise.resolve(n);(o=a.length<3?o.then(e):o).catch(e=>r(e))})}function extractComponentsGuards(r,n,o,a,i=e=>e()){const s=[];for(const c of r)for(const r in c.components){let t=c.components[r];if("beforeRouteEnter"===n||c.instances[r])if(isRouteComponent(t)){var e=(t.__vccOpts||t)[n];e&&s.push(guardToPromiseFn(e,o,a,c,r,i))}else{let e=t();s.push(()=>e.then(e=>{if(!e)throw new Error(`Couldn't resolve component "${r}" at "${c.path}"`);var t=isESModule(e)?e.default:e,e=(c.mods[r]=e,((c.components[r]=t).__vccOpts||t)[n]);return e&&guardToPromiseFn(e,o,a,c,r,i)()}))}}return s}function loadRouteLocation(e){return e.matched.every(e=>e.redirect)?Promise.reject(new Error("Cannot load a route that redirects.")):Promise.all(e.matched.map(n=>n.components&&Promise.all(Object.keys(n.components).reduce((e,r)=>{const t=n.components[r];return"function"!=typeof t||"displayName"in t||e.push(t().then(e=>{if(!e)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${n.path}". Ensure you passed a function that returns a promise.`));var t=isESModule(e)?e.default:e;n.mods[r]=e,n.components[r]=t})),e},[])))).then(()=>e)}function useLink(t){const r=inject(routerKey),i=inject(routeLocationKey),s=computed(()=>{var e=unref(t.to);return r.resolve(e)}),e=computed(()=>{const e=s.value["matched"],t=e["length"],r=e[t-1],n=i.matched;if(!r||!n.length)return-1;var o=n.findIndex(isSameRouteRecord.bind(null,r));if(-1<o)return o;var a=getOriginalPath(e[t-2]);return 1<t&&getOriginalPath(r)===a&&n[n.length-1].path!==a?n.findIndex(isSameRouteRecord.bind(null,e[t-2])):o}),n=computed(()=>-1<e.value&&includesParams(i.params,s.value.params)),o=computed(()=>-1<e.value&&e.value===i.matched.length-1&&isSameRouteLocationParams(i.params,s.value.params));return{route:s,href:computed(()=>s.value.href),isActive:n,isExactActive:o,navigate:function(e={}){if(guardEvent(e)){const e=r[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop);return t.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>e),e}return Promise.resolve()}}}function preferSingleVNode(e){return 1===e.length?e[0]:e}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink,setup(t,{slots:r}){const n=reactive(useLink(t)),e=inject(routerKey)["options"],o=computed(()=>({[getLinkClass(t.activeClass,e.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,e.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{var e=r.default&&preferSingleVNode(r.default(n));return t.custom?e:h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},e)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const r in t){const n=t[r],o=e[r];if("string"==typeof n){if(n!==o)return!1}else if(!isArray(o)||o.length!==n.length||n.some((e,t)=>e!==o[t]))return!1}return!0}function getOriginalPath(e){return e?(e.aliasOf||e).path:""}const getLinkClass=(e,t,r)=>null!=e?e:null!=t?t:r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:c,slots:u}){const e=inject(routerViewLocationKey),l=computed(()=>s.route||e.value),n=inject(viewDepthKey,0),t=computed(()=>{let e=unref(n);for(var t,r=l.value["matched"];(t=r[e])&&!t.components;)e++;return e}),f=computed(()=>l.value.matched[t.value]),p=(provide(viewDepthKey,computed(()=>t.value+1)),provide(matchedRouteKey,f),provide(routerViewLocationKey,l),ref());return watch(()=>[p.value,f.value,s.name],([t,e,r],[n,o])=>{e&&(e.instances[r]=t,o&&o!==e&&t&&t===n&&(e.leaveGuards.size||(e.leaveGuards=o.leaveGuards),e.updateGuards.size||(e.updateGuards=o.updateGuards))),!t||!e||o&&isSameRouteRecord(e,o)&&n||(e.enterCallbacks[r]||[]).forEach(e=>e(t))},{flush:"post"}),()=>{const e=l.value,t=s.name,r=f.value,n=r&&r.components[t];if(!n)return normalizeSlot(u.default,{Component:n,route:e});const o=r.props[t],a=o?!0===o?e.params:"function"==typeof o?o(e):o:null,i=h(n,assign({},a,c,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(r.instances[t]=null)},ref:p}));return normalizeSlot(u.default,{Component:i,route:e})||i}}});function normalizeSlot(e,t){if(!e)return null;e=e(t);return 1===e.length?e[0]:e}const RouterView=RouterViewImpl;function createRouter(i){const s=createRouterMatcher(i.routes,i),c=i.parseQuery||parseQuery,l=i.stringifyQuery||stringifyQuery,u=i.history,f=useCallbacks(),p=useCallbacks(),e=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let h=START_LOCATION_NORMALIZED;isBrowser&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=applyToParams.bind(null,e=>""+e),g=applyToParams.bind(null,encodeParam),v=applyToParams.bind(null,decode);function R(e,t){if(t=assign({},t||d.value),"string"==typeof e){const l=parseURL(c,e,t.path),r=s.resolve({path:l.path},t),n=u.createHref(l.fullPath);return assign(l,r,{params:v(r.params),hash:decode(l.hash),redirectedFrom:void 0,href:n})}let r;if(null!=e.path)r=assign({},e,{path:parseURL(c,e.path,t.path).path});else{const s=assign({},e.params);for(const e in s)null==s[e]&&delete s[e];r=assign({},e,{params:g(s)}),t.params=g(t.params)}const n=s.resolve(r,t),o=e.hash||"";n.params=m(v(n.params));var t=stringifyURL(l,assign({},e,{hash:encodeHash(o),path:n.path})),a=u.createHref(t);return assign({fullPath:t,hash:o,query:l===stringifyQuery?normalizeQuery(e.query):e.query||{}},n,{redirectedFrom:void 0,href:a})}function y(e){return"string"==typeof e?parseURL(c,e,d.value.path):assign({},e)}function E(e,t){if(h!==e)return createRouterError(8,{from:t,to:e})}function n(e){return S(e)}function A(t){var r=t.matched[t.matched.length-1];if(r&&r.redirect){const n=r["redirect"];let e="function"==typeof n?n(t):n;return"string"==typeof e&&((e=e.includes("?")||e.includes("#")?e=y(e):{path:e}).params={}),assign({query:t.query,hash:t.hash,params:null!=e.path?{}:t.params},e)}}function S(e,t){const r=h=R(e),n=d.value,o=e.state,a=e.force,i=!0===e.replace,s=A(r);if(s)return S(assign(y(s),{state:"object"==typeof s?assign({},o,s.state):o,force:a,replace:i}),t||r);const c=r;let u;return c.redirectedFrom=t,!a&&isSameRouteLocation(l,n,r)&&(u=createRouterError(16,{to:c,from:n}),O(n,n,!0,!1)),(u?Promise.resolve(u):_(c,n)).catch(e=>isNavigationFailure(e)?isNavigationFailure(e,2)?e:w(e):T(e,c,n)).then(e=>{if(e){if(isNavigationFailure(e,2))return S(assign({replace:i},y(e.to),{state:"object"==typeof e.to?assign({},o,e.to.state):o,force:a}),t||c)}else e=L(c,n,!0,i,o);return b(c,n,e),e})}function P(e){const t=I.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function _(r,n){let o;const[e,t,a]=extractChangingRecords(r,n);o=extractComponentsGuards(e.reverse(),"beforeRouteLeave",r,n);for(const t of e)t.leaveGuards.forEach(e=>{o.push(guardToPromiseFn(e,r,n))});const i=function(e,t){return(e=E(e,t))?Promise.reject(e):Promise.resolve()}.bind(null,r,n);return o.push(i),K(o).then(()=>{o=[];for(const e of f.list())o.push(guardToPromiseFn(e,r,n));return o.push(i),K(o)}).then(()=>{o=extractComponentsGuards(t,"beforeRouteUpdate",r,n);for(const e of t)e.updateGuards.forEach(e=>{o.push(guardToPromiseFn(e,r,n))});return o.push(i),K(o)}).then(()=>{o=[];for(const e of a)if(e.beforeEnter)if(isArray(e.beforeEnter))for(const t of e.beforeEnter)o.push(guardToPromiseFn(t,r,n));else o.push(guardToPromiseFn(e.beforeEnter,r,n));return o.push(i),K(o)}).then(()=>(r.matched.forEach(e=>e.enterCallbacks={}),(o=extractComponentsGuards(a,"beforeRouteEnter",r,n,P)).push(i),K(o))).then(()=>{o=[];for(const e of p.list())o.push(guardToPromiseFn(e,r,n));return o.push(i),K(o)}).catch(e=>isNavigationFailure(e,8)?e:Promise.reject(e))}function b(t,r,n){e.list().forEach(e=>P(()=>e(t,r,n)))}function L(e,t,r,n,o){var a=E(e,t);if(a)return a;var a=t===START_LOCATION_NORMALIZED,i=isBrowser?history.state:{};r&&(n||a?u.replace(e.fullPath,assign({scroll:a&&i&&i.scroll},o)):u.push(e.fullPath,o)),O(d.value=e,t,r,a),w()}let o,a,C=useCallbacks(),N=useCallbacks();function T(t,r,n){w(t);const e=N.list();return e.length?e.forEach(e=>e(t,r,n)):console.error(t),Promise.reject(t)}function w(r){return a||(a=!r,o=o||u.listen((e,t,r)=>{if(M.listening){const n=R(e),o=A(n);if(o)S(assign(o,{replace:!0,force:!0}),n).catch(noop);else{h=n;const a=d.value;isBrowser&&saveScrollPosition(getScrollKey(a.fullPath,r.delta),computeScrollPosition()),_(n,a).catch(e=>isNavigationFailure(e,12)?e:isNavigationFailure(e,2)?(S(assign(y(e.to),{force:!0}),n).then(e=>{isNavigationFailure(e,20)&&!r.delta&&r.type===NavigationType.pop&&u.go(-1,!1)}).catch(noop),Promise.reject()):(r.delta&&u.go(-r.delta,!1),T(e,n,a))).then(e=>{(e=e||L(n,a,!1))&&(r.delta&&!isNavigationFailure(e,8)?u.go(-r.delta,!1):r.type===NavigationType.pop&&isNavigationFailure(e,20)&&u.go(-1,!1)),b(n,a,e)}).catch(noop)}}}),C.list().forEach(([e,t])=>r?t(r):e()),C.reset()),r}function O(t,r,e,n){const o=i["scrollBehavior"];if(!isBrowser||!o)return Promise.resolve();const a=!e&&getSavedScrollPosition(getScrollKey(t.fullPath,0))||(n||!e)&&history.state&&history.state.scroll||null;nextTick().then(()=>o(t,r,a)).then(e=>e&&scrollToPosition(e)).catch(e=>T(e,t,r))}const t=e=>u.go(e);let k;const I=new Set,M={currentRoute:d,listening:!0,addRoute:function(e,t){let r,n;return n=isRouteName(e)?(r=s.getRecordMatcher(e),t):e,s.addRoute(n,r)},removeRoute:function(e){e=s.getRecordMatcher(e);e&&s.removeRoute(e)},clearRoutes:s.clearRoutes,hasRoute:function(e){return!!s.getRecordMatcher(e)},getRoutes:function(){return s.getRoutes().map(e=>e.record)},resolve:R,options:i,push:n,replace:function(e){return n(assign(y(e),{replace:!0}))},go:t,back:()=>t(-1),forward:()=>t(1),beforeEach:f.add,beforeResolve:p.add,afterEach:e.add,onError:N.add,isReady:function(){return a&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((e,t)=>{C.add([e,t])})},install(e){e.component("RouterLink",RouterLink),e.component("RouterView",RouterView),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!k&&d.value===START_LOCATION_NORMALIZED&&(k=!0,n(u.location).catch(e=>{}));var t={};for(const e in START_LOCATION_NORMALIZED)Object.defineProperty(t,e,{get:()=>d.value[e],enumerable:!0});e.provide(routerKey,this),e.provide(routeLocationKey,shallowReactive(t)),e.provide(routerViewLocationKey,d);const r=e.unmount;I.add(e),e.unmount=function(){I.delete(e),I.size<1&&(h=START_LOCATION_NORMALIZED,o&&o(),o=null,d.value=START_LOCATION_NORMALIZED,k=!1,a=!1),r()}}};function K(e){return e.reduce((e,t)=>e.then(()=>P(t)),Promise.resolve())}return M}function extractChangingRecords(t,r){const n=[],o=[],a=[],i=Math.max(r.matched.length,t.matched.length);for(let e=0;e<i;e++){const i=r.matched[e],s=(i&&(t.matched.find(e=>isSameRouteRecord(e,i))?o:n).push(i),t.matched[e]);!s||r.matched.find(e=>isSameRouteRecord(e,s))||a.push(s)}return[n,o,a]}function useRouter(){return inject(routerKey)}function useRoute(e){return inject(routeLocationKey)}export{NavigationFailureType,RouterLink,RouterView,START_LOCATION_NORMALIZED as START_LOCATION,createMemoryHistory,createRouter,createRouterMatcher,createWebHashHistory,createWebHistory,isNavigationFailure,loadRouteLocation,matchedRouteKey,onBeforeRouteLeave,onBeforeRouteUpdate,parseQuery,routeLocationKey,routerKey,routerViewLocationKey,stringifyQuery,useLink,useRoute,useRouter,viewDepthKey};